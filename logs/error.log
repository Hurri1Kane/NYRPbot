{"context":"Command Loading","errorId":"ERR-M9O47XJL-EYDB2","level":"error","message":"Cannot find module '../../utils/permissionManager'\nRequire stack:\n- C:\\NYRPbot\\src\\discord\\commands\\infraction\\createInfraction.js\n- C:\\NYRPbot\\src\\discord\\client.js\n- C:\\NYRPbot\\src\\index.js","service":"nyrp-staff-bot","stack":"Error: Cannot find module '../../utils/permissionManager'\nRequire stack:\n- C:\\NYRPbot\\src\\discord\\commands\\infraction\\createInfraction.js\n- C:\\NYRPbot\\src\\discord\\client.js\n- C:\\NYRPbot\\src\\index.js\n    at Function._resolveFilename (node:internal/modules/cjs/loader:1225:15)\n    at Function._load (node:internal/modules/cjs/loader:1055:27)\n    at TracingChannel.traceSync (node:diagnostics_channel:322:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:220:24)\n    at Module.require (node:internal/modules/cjs/loader:1311:12)\n    at require (node:internal/modules/helpers:136:16)\n    at Object.<anonymous> (C:\\NYRPbot\\src\\discord\\commands\\infraction\\createInfraction.js:3:32)\n    at Module._compile (node:internal/modules/cjs/loader:1554:14)\n    at Object..js (node:internal/modules/cjs/loader:1706:10)\n    at Module.load (node:internal/modules/cjs/loader:1289:32)","timestamp":"2025-04-19T11:08:47.891Z"}
{"context":"Bot Initialization","errorId":"ERR-M9O48W8L-LPNUF","level":"error","message":"Cannot read properties of undefined (reading 'checkExpirationInterval')","service":"nyrp-staff-bot","stack":"TypeError: Cannot read properties of undefined (reading 'checkExpirationInterval')\n    at new SuspensionChecker (C:\\NYRPbot\\src\\discord\\utils\\suspensionChecker.js:19:52)\n    at init (C:\\NYRPbot\\src\\index.js:45:25)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","timestamp":"2025-04-19T11:09:32.854Z"}
{"channelId":"1357029740376101091","commandName":"office","context":"Office Create Command","errorId":"ERR-M9O4D8TR-ZP5UJ","interactionId":"1363110108975988786","level":"error","message":"Cannot read properties of undefined (reading 'nameFormat')","service":"nyrp-staff-bot","stack":"TypeError: Cannot read properties of undefined (reading 'nameFormat')\n    at handleCreateOffice (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:255:49)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:167:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-19T11:12:55.791Z","userId":"538620090523058178"}
{"level":"error","message":"Failed to initialize ticket counter: Cannot read properties of undefined (reading 'match')","service":"nyrp-staff-bot","timestamp":"2025-04-19T11:31:05.045Z"}
{"channelId":"1357029739868455080","commandName":"ticket","context":"Ticket Create Command","errorId":"ERR-M9O5RD3Y-94PB7","interactionId":"1363119916944986203","level":"error","message":"Ticket.find(...).count is not a function","service":"nyrp-staff-bot","stack":"TypeError: Ticket.find(...).count is not a function\n    at handleCreateTicket (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:250:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:193:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-19T11:51:54.142Z","userId":"538620090523058178"}
{"context":"BackgroundTask:ticketActivityCheck:scheduled","errorId":"ERR-M9O636XP-NQFT7","level":"error","message":"Cannot read properties of undefined (reading 'reminderAfterHours')","service":"nyrp-staff-bot","stack":"TypeError: Cannot read properties of undefined (reading 'reminderAfterHours')\n    at Object.task (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:217:81)\n    at BackgroundTaskManager.runTask (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:177:22)\n    at Timeout._onTimeout (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:113:12)\n    at listOnTimeout (node:internal/timers:594:17)\n    at process.processTimers (node:internal/timers:529:7)","timestamp":"2025-04-19T12:01:06.014Z"}
{"level":"error","message":"Error in scheduled execution of task 'ticketActivityCheck': Cannot read properties of undefined (reading 'reminderAfterHours') (Error ID: ERR-M9O636XP-NQFT7)","service":"nyrp-staff-bot","timestamp":"2025-04-19T12:01:06.016Z"}
{"context":"SuspensionChecker:checkExpiredSuspensions","errorId":"ERR-M9ODEV9B-K87IQ","level":"error","message":"getaddrinfo ENOTFOUND ac-flwzoq1-shard-00-02.5jlnac1.mongodb.net","service":"nyrp-staff-bot","stack":"MongoServerSelectionError: getaddrinfo ENOTFOUND ac-flwzoq1-shard-00-02.5jlnac1.mongodb.net\n    at Topology.selectServer (C:\\NYRPbot\\node_modules\\mongodb\\lib\\sdam\\topology.js:321:38)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:526:9)\n    at async tryOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:145:18)\n    at async executeOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)\n    at async [Symbol.asyncIterator] (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:255:34)","timestamp":"2025-04-19T15:26:08.064Z"}
{"level":"error","message":"Error checking expired suspensions: getaddrinfo ENOTFOUND ac-flwzoq1-shard-00-02.5jlnac1.mongodb.net (Error ID: ERR-M9ODEV9B-K87IQ)","service":"nyrp-staff-bot","timestamp":"2025-04-19T15:26:08.176Z"}
{"context":"BackgroundTask:ticketActivityCheck:scheduled","errorId":"ERR-M9ODEVF7-AP511","level":"error","message":"Cannot read properties of undefined (reading 'reminderAfterHours')","service":"nyrp-staff-bot","stack":"TypeError: Cannot read properties of undefined (reading 'reminderAfterHours')\n    at Object.task (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:217:81)\n    at BackgroundTaskManager.runTask (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:177:22)\n    at Timeout._onTimeout (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:113:12)\n    at listOnTimeout (node:internal/timers:594:17)\n    at process.processTimers (node:internal/timers:529:7)","timestamp":"2025-04-19T15:26:08.276Z"}
{"level":"error","message":"Error in scheduled execution of task 'ticketActivityCheck': Cannot read properties of undefined (reading 'reminderAfterHours') (Error ID: ERR-M9ODEVF7-AP511)","service":"nyrp-staff-bot","timestamp":"2025-04-19T15:26:08.296Z"}
{"context":"BackgroundTask:ticketActivityCheck:scheduled","errorId":"ERR-M9OEHGBD-QPN67","level":"error","message":"Cannot read properties of undefined (reading 'reminderAfterHours')","service":"nyrp-staff-bot","stack":"TypeError: Cannot read properties of undefined (reading 'reminderAfterHours')\n    at Object.task (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:217:81)\n    at BackgroundTaskManager.runTask (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:177:22)\n    at Timeout._onTimeout (C:\\NYRPbot\\src\\discord\\utils\\backgroundTasks.js:113:12)\n    at listOnTimeout (node:internal/timers:594:17)\n    at process.processTimers (node:internal/timers:529:7)","timestamp":"2025-04-19T15:56:08.281Z"}
{"level":"error","message":"Error in scheduled execution of task 'ticketActivityCheck': Cannot read properties of undefined (reading 'reminderAfterHours') (Error ID: ERR-M9OEHGBD-QPN67)","service":"nyrp-staff-bot","timestamp":"2025-04-19T15:56:08.328Z"}
{"level":"error","message":"Failed to initialize ticket counter: Cannot read properties of undefined (reading 'match')","service":"nyrp-staff-bot","timestamp":"2025-04-19T16:05:15.985Z"}
{"channelId":"1357029741021892745","commandName":"ticket","context":"Ticket Create Command","errorId":"ERR-M9OEYXPW-Y6I95","interactionId":"1363184801854525570","level":"error","message":"Ticket.find(...).count is not a function","service":"nyrp-staff-bot","stack":"TypeError: Ticket.find(...).count is not a function\n    at handleCreateTicket (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:257:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:200:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-19T16:09:43.989Z","userId":"538620090523058178"}
{"channelId":"1358031305463304302","context":"Infraction Approval Button","errorId":"ERR-M9OF1B3U-SKDXY","interactionId":"1363185267577454844","level":"error","message":"Modal is not defined","service":"nyrp-staff-bot","stack":"ReferenceError: Modal is not defined\n    at Object.approve (C:\\NYRPbot\\src\\discord\\commands\\infraction\\createInfraction.js:1182:21)\n    at handleButton (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:188:34)\n    at Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:44:15)\n    at Client.<anonymous> (C:\\NYRPbot\\src\\discord\\client.js:80:50)\n    at Client.emit (node:events:518:28)\n    at InteractionCreateAction.handle (C:\\NYRPbot\\node_modules\\discord.js\\src\\client\\actions\\InteractionCreate.js:97:12)\n    at module.exports [as INTERACTION_CREATE] (C:\\NYRPbot\\node_modules\\discord.js\\src\\client\\websocket\\handlers\\INTERACTION_CREATE.js:4:36)\n    at WebSocketManager.handlePacket (C:\\NYRPbot\\node_modules\\discord.js\\src\\client\\websocket\\WebSocketManager.js:348:31)\n    at WebSocketManager.<anonymous> (C:\\NYRPbot\\node_modules\\discord.js\\src\\client\\websocket\\WebSocketManager.js:232:12)\n    at WebSocketManager.emit (C:\\NYRPbot\\node_modules\\@vladfrangu\\async_event_emitter\\dist\\index.cjs:287:31)","timestamp":"2025-04-19T16:11:34.652Z","userId":"538620090523058178"}
{"context":"BackgroundTask:ticketActivityCheck:scheduled","errorId":"ERR-M9OTHN7T-2V5O3","level":"error","message":"read ECONNRESET","service":"nyrp-staff-bot","stack":"MongoServerSelectionError: read ECONNRESET\n    at Topology.selectServer (C:\\NYRPbot\\node_modules\\mongodb\\lib\\sdam\\topology.js:321:38)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:555:9)\n    at process.processTimers (node:internal/timers:529:7)\n    at async tryOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:145:18)\n    at async executeOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)","timestamp":"2025-04-19T22:56:11.470Z"}
{"level":"error","message":"Error in scheduled execution of task 'ticketActivityCheck': read ECONNRESET (Error ID: ERR-M9OTHN7T-2V5O3)","service":"nyrp-staff-bot","timestamp":"2025-04-19T22:56:11.658Z"}
{"context":"SuspensionChecker:checkExpiredSuspensions","errorId":"ERR-M9OTHNDB-XY0T2","level":"error","message":"read ECONNRESET","service":"nyrp-staff-bot","stack":"MongoServerSelectionError: read ECONNRESET\n    at Topology.selectServer (C:\\NYRPbot\\node_modules\\mongodb\\lib\\sdam\\topology.js:321:38)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at listOnTimeout (node:internal/timers:555:9)\n    at process.processTimers (node:internal/timers:529:7)\n    at async tryOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:145:18)\n    at async executeOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)","timestamp":"2025-04-19T22:56:11.664Z"}
{"level":"error","message":"Error checking expired suspensions: read ECONNRESET (Error ID: ERR-M9OTHNDB-XY0T2)","service":"nyrp-staff-bot","timestamp":"2025-04-19T22:56:11.666Z"}
{"context":"BackgroundTask:officeCleanup:scheduled","errorId":"ERR-M9OTHNDH-GCX9R","level":"error","message":"read ECONNRESET","service":"nyrp-staff-bot","stack":"MongoServerSelectionError: read ECONNRESET\n    at Topology.selectServer (C:\\NYRPbot\\node_modules\\mongodb\\lib\\sdam\\topology.js:321:38)\n    at runNextTicks (node:internal/process/task_queues:65:5)\n    at process.processTimers (node:internal/timers:526:9)\n    at async tryOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:145:18)\n    at async executeOperation (C:\\NYRPbot\\node_modules\\mongodb\\lib\\operations\\execute_operation.js:75:16)\n    at async FindCursor._initialize (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\find_cursor.js:61:26)\n    at async FindCursor.cursorInit (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:633:27)\n    at async FindCursor.fetchBatch (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:667:13)\n    at async FindCursor.next (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:347:17)\n    at async [Symbol.asyncIterator] (C:\\NYRPbot\\node_modules\\mongodb\\lib\\cursor\\abstract_cursor.js:255:34)","timestamp":"2025-04-19T22:56:11.669Z"}
{"level":"error","message":"Error in scheduled execution of task 'officeCleanup': read ECONNRESET (Error ID: ERR-M9OTHNDH-GCX9R)","service":"nyrp-staff-bot","timestamp":"2025-04-19T22:56:11.673Z"}
{"channelId":"1357029738949906613","commandName":"office","context":"Office Create Command","errorId":"ERR-M9OVDC61-91I92","interactionId":"1363300338081333378","level":"error","message":"Supplied parameter is not a cached User or Role.","service":"nyrp-staff-bot","stack":"TypeError [InvalidType]: Supplied parameter is not a cached User or Role.\n    at PermissionOverwrites.resolve (C:\\NYRPbot\\node_modules\\discord.js\\src\\structures\\PermissionOverwrites.js:185:13)\n    at C:\\NYRPbot\\node_modules\\discord.js\\src\\managers\\GuildChannelManager.js:181:89\n    at Array.map (<anonymous>)\n    at GuildChannelManager.create (C:\\NYRPbot\\node_modules\\discord.js\\src\\managers\\GuildChannelManager.js:181:51)\n    at handleCreateOffice (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:331:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:167:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-19T23:48:49.754Z","userId":"538620090523058178"}
{"channelId":"1358790065622614228","commandName":"office","context":"Office Create Command","errorId":"ERR-M9OVEZRW-MCMCD","interactionId":"1363300662137589790","level":"error","message":"Supplied parameter is not a cached User or Role.","service":"nyrp-staff-bot","stack":"TypeError [InvalidType]: Supplied parameter is not a cached User or Role.\n    at PermissionOverwrites.resolve (C:\\NYRPbot\\node_modules\\discord.js\\src\\structures\\PermissionOverwrites.js:185:13)\n    at C:\\NYRPbot\\node_modules\\discord.js\\src\\managers\\GuildChannelManager.js:181:89\n    at Array.map (<anonymous>)\n    at GuildChannelManager.create (C:\\NYRPbot\\node_modules\\discord.js\\src\\managers\\GuildChannelManager.js:181:51)\n    at handleCreateOffice (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:331:44)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\offices\\officeCommand.js:167:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-19T23:50:07.004Z","userId":"538620090523058178"}
{"channelId":"1357029738949906610","commandName":"ticket","context":"Ticket Create Command","errorId":"ERR-M9PU4P3P-Y76G7","interactionId":"1363545211741012238","level":"error","message":"Unknown Channel","service":"nyrp-staff-bot","stack":"DiscordAPIError[10003]: Unknown Channel\n    at handleErrors (C:\\NYRPbot\\node_modules\\@discordjs\\rest\\dist\\index.js:727:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async SequentialHandler.runRequest (C:\\NYRPbot\\node_modules\\@discordjs\\rest\\dist\\index.js:1128:23)\n    at async SequentialHandler.queueRequest (C:\\NYRPbot\\node_modules\\@discordjs\\rest\\dist\\index.js:959:14)\n    at async _REST.request (C:\\NYRPbot\\node_modules\\@discordjs\\rest\\dist\\index.js:1272:22)\n    at async GuildChannelManager.fetch (C:\\NYRPbot\\node_modules\\discord.js\\src\\managers\\GuildChannelManager.js:399:20)\n    at async handleCreateTicket (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:281:30)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\commands\\infraction\\ticketCommand.js:197:13)\n    at async handleChatCommand (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:153:5)\n    at async Object.execute (C:\\NYRPbot\\src\\discord\\events\\interactionCreate.js:42:9)","timestamp":"2025-04-20T16:01:53.176Z","userId":"538620090523058178"}
